(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,a){e.exports=a(376)},214:function(e,t,a){},373:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),l=(a(214),a(21)),s=a(22),c=a(24),u=a(23),h=a(25),p=a(378),d=a(379),m=a(380),f=a(15),g=a.n(f),v=a(20),w=a(7),k=a(42),b=a(26),y=a.n(b),E=a(377),C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchLinks=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("https://damp-retreat-88900.herokuapp.com/api/v1/links/");case 3:t=e.sent,a.setState({links:t.data.data}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=Object(v.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({loading:!0},function(){return a.postLink()});case 1:case"end":return e.stop()}},e,this)})),a.state={open:!1,url:"",loading:!1,links:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")?this.fetchLinks():this.props.history.push("/signin")}},{key:"postLink",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a,n,r=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.state.url,n={Authorization:t},e.prev=3,e.next=6,y.a.post("https://damp-retreat-88900.herokuapp.com/api/v1/links/create",{url:a},{headers:n});case 6:e.sent,this.setState({loading:!1,open:!1},function(){return r.fetchLinks()}),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),this.setState({loading:!1,open:!1}),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderLinks",value:function(){var e=this.state.links;if(e.length>0)return e.map(function(e,t){return r.a.createElement("div",{key:t,id:"link-container"},r.a.createElement("div",{id:"link-header"},r.a.createElement(E.a,{to:"/profile/".concat(e.user_id)},r.a.createElement("p",null,e.user_name))),r.a.createElement("iframe",{id:"video",allowFullScreen:"allowFullScreen",src:"https://www.youtube.com/embed/".concat(e.video_id),title:t}),r.a.createElement("div",null,r.a.createElement("a",{href:"".concat(e.url)},r.a.createElement("p",{id:"video-link"},e.url))))})}},{key:"showModal",value:function(){var e=this;return r.a.createElement(k.a,{open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:"modal"},r.a.createElement(w.b,{value:this.state.url,placeholder:"Youtube Link",label:"Youtube Link",style:{marginBottom:"5px"},onChange:function(t){return e.setState({url:t.target.value})}}),r.a.createElement(w.a,{onClick:this.handleSubmit,disabled:this.state.loading,style:{marginTop:"15px"},variant:"contained",color:"primary"},"Share")))}},{key:"render",value:function(){return console.log(this.state.links),r.a.createElement("div",{className:"App",style:{minHeight:window.screen.height,maxWidth:"614px",marginTop:"50px"}},this.showModal(),this.renderLinks(),r.a.createElement(w.a,{onClick:this.handleOpen,variant:"contained",color:"primary",id:"create-btn"},"Share Youtube Link"))}}]),t}(n.Component),x=a(34),O="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png",S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).fetchData=Object(v.a)(g.a.mark(function e(){var t,n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),n={Authorization:t},e.prev=2,e.next=5,y.a.get("https://damp-retreat-88900.herokuapp.com/api/v1/users/show/".concat(a.getProfileId()),{headers:n});case 5:r=e.sent,a.setState({data:r.data.data}),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this,[[2,9]])})),a.logout=Object(v.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("token");case 2:a.props.history.push("/signin");case 3:case"end":return e.stop()}},e,this)})),a.handleFollow=function(){var e=Object(v.a)(g.a.mark(function e(t){var n,r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),r={Authorization:n},o=a.getProfileId(),o=parseInt(o),e.prev=4,e.next=7,y.a.post("https://damp-retreat-88900.herokuapp.com/api/v1/users/".concat(t,"/"),{id:o},{headers:r});case 7:e.sent,a.fetchData(),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,this,[[4,11]])}));return function(t){return e.apply(this,arguments)}}(),a.profileOnClick=function(e){window.location.href="/profile/".concat(e)},a.state={data:null,showFollower:!1,showFollowing:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")?this.fetchData():this.props.history.push("/signin")}},{key:"handleClose",value:function(e){console.log(e),this.setState(Object(x.a)({},e,!1))}},{key:"getProfileId",value:function(){return this.props.match.params.id}},{key:"renderButton",value:function(){var e=this,t=this.getProfileId();t=parseInt(t);var a=this.state.data,n=a.current_user,o=a.is_following;return t===n.id?r.a.createElement(w.a,{style:{marginBottom:"15px"},variant:"contained",color:"secondary",onClick:this.logout},"Logout"):o?r.a.createElement(w.a,{style:{marginBottom:"15px"},variant:"contained",color:"secondary",onClick:function(){return e.handleFollow("unfollow")}},"Unfollow"):r.a.createElement(w.a,{style:{marginBottom:"15px"},variant:"contained",color:"secondary",onClick:function(){return e.handleFollow("follow")}},"Follow")}},{key:"renderUserLinks",value:function(){var e=document.getElementById("profile-container").clientWidth;return this.state.data.user_links.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("iframe",{id:"video",allowFullScreen:"allowFullScreen",src:"https://www.youtube.com/embed/".concat(t.video_id),title:a,style:{width:e/3,height:e/3}}))})}},{key:"showFollower",value:function(){var e=this;if(this.state.data){var t=this.state.data.followers;return r.a.createElement(k.a,{open:this.state.showFollower,onClose:function(){return e.handleClose("showFollower")}},r.a.createElement("div",{className:"modal"},t.map(function(t,a){return r.a.createElement("div",{key:a,style:{display:"flex",alignItems:"center"}},r.a.createElement("img",{src:O,className:"modal-pic",alt:""}),r.a.createElement(w.a,{onClick:function(){return e.profileOnClick(t.id)}},r.a.createElement("p",null,t.name)))})))}}},{key:"showFollowing",value:function(){var e=this;if(this.state.data){var t=this.state.data.following;return r.a.createElement(k.a,{open:this.state.showFollowing,onClose:function(){return e.handleClose("showFollowing")}},r.a.createElement("div",{className:"modal"},t.map(function(t,a){return r.a.createElement("div",{key:a,style:{display:"flex",alignItems:"center"}},r.a.createElement("img",{src:O,className:"modal-pic",alt:""}),r.a.createElement(w.a,{onClick:function(){return e.profileOnClick(t.id)}},r.a.createElement("p",null,t.name)))})))}}},{key:"renderProfile",value:function(){var e=this,t=document.getElementById("profile-container").clientWidth,a=this.state.data,n=(a.current_user,a.followers),o=a.following,i=a.user_info;return r.a.createElement("div",{id:"profile-content-container"},r.a.createElement("img",{id:"profile-img",src:O,alt:""}),r.a.createElement("h3",null,i.name),this.renderButton(),r.a.createElement("div",{id:"follow-container"},r.a.createElement(w.a,{onClick:function(){return e.setState({showFollower:!0})}},n.length," Followers"),r.a.createElement(w.a,{onClick:function(){return e.setState({showFollowing:!0})}},o.length," Following")),r.a.createElement("div",{id:"user-video-container",style:{width:t}},this.renderUserLinks()))}},{key:"render",value:function(){return r.a.createElement("div",{id:"profile-container"},this.showFollower(),this.showFollowing(),this.state.data?this.renderProfile():null)}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(x.a)({},e,t))},a.handleSubmit=function(){var e=a.state;e.password===e.confirmPassword?a.setState({loading:!0},function(){a.registerUser()}):alert("password must match")},a.state={email:"",password:"",name:"",confirmPassword:"",loading:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"registerUser",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t,a,n,r,o,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("register"),t=this.state,a=t.email,n=t.password,r=t.name,e.prev=2,e.next=5,y.a.post("https://damp-retreat-88900.herokuapp.com/api/v1/users/create",{email:a,password:n,name:r});case 5:return o=e.sent,i=o.data.access_token,e.next=9,localStorage.setItem("token",i);case 9:this.props.history.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),alert(e.t0),this.setState({loading:!1});case 16:case"end":return e.stop()}},e,this,[[2,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"signin-container"},r.a.createElement(w.b,{style:{marginBottom:"5px"},label:"Full Name",placeholder:"Full Name",value:this.state.name,onChange:function(t){return e.handleChange("name",t.target.value)}}),r.a.createElement(w.b,{style:{marginBottom:"5px"},label:"Email",placeholder:"Email",value:this.state.email,onChange:function(t){return e.handleChange("email",t.target.value)}}),r.a.createElement(w.b,{type:"password",style:{marginBottom:"5px"},label:"Password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange("password",t.target.value)}}),r.a.createElement(w.b,{type:"password",style:{marginBottom:"5px"},label:"Confirm Password",placeholder:"Confirm Password",value:this.state.confirmPassword,onChange:function(t){return e.handleChange("confirmPassword",t.target.value)}}),r.a.createElement(w.a,{disabled:this.state.loading,color:"primary",onClick:function(){return e.props.history.push("/signin")}},"Signin"),r.a.createElement(w.a,{disabled:this.state.loading,color:"primary",onClick:function(){return e.props.history.push("/register")}},"Register"),r.a.createElement(w.a,{onClick:this.handleSubmit,disabled:this.state.loading,style:{marginTop:"15px"},variant:"contained",color:"primary"},"Submit"))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(x.a)({},e,t))},a.handleSumbit=Object(v.a)(g.a.mark(function e(){var t,n,r,o,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.email,r=t.password,e.prev=1,e.next=4,y.a.post("https://damp-retreat-88900.herokuapp.com/api/v1/users/signin",{email:n,password:r});case 4:return o=e.sent,i=o.data.access_token,console.log(i),e.next=9,localStorage.setItem("token",i);case 9:a.props.history.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0),a.setState({loading:!1});case 16:case"end":return e.stop()}},e,this,[[1,12]])})),a.state={email:"",password:"",loading:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"signin-container"},r.a.createElement(w.b,{style:{marginBottom:"5px"},label:"Email",placeholder:"Email",value:this.state.email,onChange:function(t){return e.handleChange("email",t.target.value)}}),r.a.createElement(w.b,{type:"password",style:{marginBottom:"5px"},label:"Password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange("password",t.target.value)}}),r.a.createElement(w.a,{disabled:this.state.loading,color:"primary",onClick:function(){return e.props.history.push("/signin")}},"Signin"),r.a.createElement(w.a,{disabled:this.state.loading,color:"primary",onClick:function(){return e.props.history.push("/register")}},"Register"),r.a.createElement(w.a,{disabled:this.state.loading,style:{marginTop:"15px"},variant:"contained",color:"primary",onClick:this.handleSumbit},"Submit"))}}]),t}(n.Component),I=(a(373),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(d.a,null,r.a.createElement(m.a,{path:"/signin",component:F}),r.a.createElement(m.a,{path:"/register",component:j}),r.a.createElement(m.a,{path:"/profile/:id",component:S}),r.a.createElement(m.a,{path:"/*",component:C})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[209,2,1]]]);
//# sourceMappingURL=main.b51c7832.chunk.js.map